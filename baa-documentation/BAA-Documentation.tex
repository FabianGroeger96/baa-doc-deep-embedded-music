\documentclass[a4paper]{scrreprt}

%%% PACKAGES %%%

%etoolbox for rules
\usepackage{etoolbox}

% Figure Placement
\usepackage{float}
% PDF/A Compliance
%\usepackage[a-2b,latxmp]{pdfx}

% add Unicode support and use English as language
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}

% Use Times NR as font
\usepackage{lmodern}
\usepackage[T1]{fontenc}

% Better tables
\usepackage{tabularx}

% Better enumerisation env
\usepackage{enumitem}
\usepackage{multirow}

% Use graphics
\usepackage{graphicx}

% Have subfigures and captions
\usepackage{subcaption}

% Be able to include PDFs in the file
\usepackage{pdfpages}

% Have custom abstract heading
\usepackage{abstract}

% Need a list of equation
\usepackage{tocloft}
\usepackage{ragged2e}

\usepackage{dirtree}
\usepackage{adjustbox}

% Better equation environment
\usepackage{amsmath}

% Symbols for most SI units
\usepackage{siunitx}

\usepackage{csquotes}

% to make beautiful tables
\usepackage{booktabs}

% to syntax highlighted code samples
\usepackage{listings}

% Clickable Links to Websites and chapters
\usepackage[hidelinks]{hyperref}

% New command for 'fullref'
\newcommand*{\fullref}[1]{\hyperref[{#1}]{\nameref*{#1} (\ref*{#1})}}

% lscape.sty Produce landscape pages in a (mainly) portrait document.
%\usepackage{lscape}
\usepackage{pdflscape}

% Symbols like checkmark
\usepackage{amssymb}
\usepackage{pifont}

% Lorem ipsum package for default text
\usepackage{lipsum}

\usepackage[absolute]{textpos}

\usepackage{longtable}

% Header
\usepackage{scrlayer-scrpage}

\clearpairofpagestyles

% sets the font of the document headers to Times NR
\addtokomafont{disposition}{\rmfamily}

 % Configures header and footer
\setkomafont{pageheadfoot}{\rmfamily\footnotesize}
\setkomafont{pagehead}{\rmfamily\bfseries}
\setkomafont{pagination}{}

% Displays line for header and footer
\KOMAoptions{
   headsepline = true,
   footsepline = true,
   plainfootsepline = true,
}

\usepackage{tikz}
\tikzset{
    input/.style = {coordinate},
    output/.style = {coordinate},
    block/.style={rectangle, draw, text width=7.3em,
           text centered, rounded corners, minimum height=3em},
    arrow/.style={-{Stealth[]}}
     }
\usetikzlibrary{positioning,arrows.meta}

\usepackage{pgfgantt}
\usepackage{graphicx}
\usepackage{xcolor}

\ganttset{group/.append style={orange},
milestone/.append style={red},
progress label node anchor/.append style={text=red}}

\automark[chapter]{chapter}

\ohead{\headmark}
\ihead{Fabian Gröger}

\ofoot*{\pagemark}
\ifoot*{HSLU BAA - Deep embedded Music}

% Glossary, hyperref, babel, polyglossia, inputenc, fontenc must be loaded before this package if they are used
\usepackage[ 
xindy,
toc,         
acronym,
nopostdot,
sort=standard   
]{glossaries}

\setglossarystyle{listgroup}

% Redefine the quote charachter as we are using ngerman
%\GlsSetQuote{+}
% Define the usage of an acronym, Abbreviation (Abbr.), next usage: The Abbr. of ...
\setacronymstyle{long-short}

% Bibliography & citing
\usepackage[
	backend=biber,
	style=authoryear,
	bibstyle=authoryear,
	citestyle=authoryear
	]{biblatex}
\addbibresource{references_zotero.bib}
\addbibresource{Referenzen.bib}
\addbibresource{Links.bib}
\DeclareLanguageMapping{english}{english-apa}

%%% COMMAND REBINDINGS %%%
\newcommand{\tabitem}{~~\llap{\textbullet}~~}
\newcommand{\xmark}{\ding{55}}
\newcommand{\notmark}{\textbf{\textasciitilde}}
% Pro/Con item https://tex.stackexchange.com/questions/145198/change-the-bullet-of-each-item#145203
\newcommand\pro{\item[$+$]}
\newcommand\con{\item[$-$]}

% Define list of equations - Thanks to Charles Clayton: https://tex.stackexchange.com/a/354096
\newcommand{\listequationsname}{List of Equations}
\newlistof{myequations}{equ}{\listequationsname}
\newcommand{\myequations}[1]{
	\addcontentsline{equ}{myequations}{\protect\numberline{\theequation}#1}
}
\setlength{\cftmyequationsnumwidth}{2.3em}
\setlength{\cftmyequationsindent}{1.5em}

% Usage {equation}{caption}{label}
\newcommand{\indexequation}[3]{
	\begin{align} \label{#3} \ensuremath{#1} \end{align}
	\myequations{#3} \centering #2 \normalsize \justify }
	
% equations with term definitions, credit to tex.stackexchange.com/questions/95838/how-to-write-a-perfect-equation-parameters-description
\newenvironment{conditions}
  {\par\vspace{\abovedisplayskip}\noindent\begin{tabular}{>{$}l<{$} @{${}={}$} l}}
  {\end{tabular}\par\vspace{\belowdisplayskip}}
  
\newenvironment{conditions*}
  {\par\vspace{\abovedisplayskip}\noindent
   \tabularx{\columnwidth}{>{$}l<{$} @{${}={}$} >{\raggedright\arraybackslash}X}}
  {\endtabularx\par\vspace{\belowdisplayskip}}

% Todolist - credit to https://tex.stackexchange.com/questions/247681/how-to-create-checkbox-todo-list
\newlist{todolist}{itemize}{1}
\setlist[todolist]{label=$\square$}

% Nested Enumeratelist credit to https://tex.stackexchange.com/a/54676
\newlist{legal}{enumerate}{10}
\setlist[legal]{label*=\arabic*.}

% Formatting Chapter title, thanks to: 
% http://texnorte.blogspot.com/2012/06/insert-code-before-chapter-title.html
\newcommand\toptitle{}
\makeatletter
\def\@makechapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright \normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \toptitle\par
        \huge\bfseries \@chapapp\space \thechapter
        \par\nobreak
        \vskip 20\p@
      \fi
    \fi
    \interlinepenalty\@M
    \Huge \bfseries #1\par\nobreak
    \vskip 40\p@
  }}
\makeatother

%%% GLOSSARY %%%
\input{acronyms.tex}
\input{glossaries.tex}
\makeglossaries

%%% PATH DEFINITIONS %%%
% Define the path were images are found
\graphicspath{{./img/}{./appendix/}}

% Reset Glossary every chapter
\preto\chapter{\glsresetall}

%%%%%%%%%%%%%%%%
%%% DOCUMENT %%%

\begin{document}

% HSLU Preamble (no header or footer)
\pagestyle{empty}

% Cover Page
\include{include/00_Cover_Page}
\include{include/00_HSLU_Preamble}

% Rest of the document has header and footer
\pagestyle{headings}
\pagenumbering{Roman}

% Abstract
\begin{abstract}
	\noindent
	\lipsum[50]
\end{abstract}

% Table of contents
\tableofcontents

\clearpage
\pagenumbering{arabic}

\include{include/01_Introduction}

\include{include/02_Related_Work}

\include{include/03_Ideas_Concepts}

\include{include/04_Method}

\include{include/05_Realization}

\include{include/06_Evaluation_Validation}

\include{include/07_Conclusion}

\newpage

\pagenumbering{Roman}

\appendix
% Verhindert das Einfügen von Kapiteltitel kleiner als \chapter
\addtocontents{toc}{\protect\setcounter{tocdepth}{0}}

\listoffigures

\listoftables

\listofmyequations 
\pagebreak

\printglossary[type=\acronymtype, title=List of Abbreviations]

\printbibliography[heading=bibintoc,title=Bibliography]

\include{include/99_Appendix}

\end{document}
